<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.shape.Line?>
<?import javafx.scene.Node?>

<!-- Use a StackPane to center the content vertically and horizontally -->
<StackPane xmlns:fx="http://javafx.com/fxml/1"
           xmlns="http://javafx.com/javafx"
           fx:controller="com.meetingapp.controllers.LoginController"
           styleClass="root"> <!-- Apply root styling from CSS -->

    <VBox alignment="TOP_CENTER" spacing="0" prefHeight="-1.0" prefWidth="-1.0" styleClass="login-layout">

        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="header-bar">
            <padding>
                <Insets top="15" right="25" bottom="15" left="25"/>
            </padding>
            <ImageView fitHeight="30" fitWidth="30" preserveRatio="true">
                <image>
                    <!-- Replace with your actual logo path -->
                    <Image url="@../images/logo.png"/>
                </image>
            </ImageView>
            <Label text="Connect" styleClass="app-title" HBox.hgrow="ALWAYS"/>

            <!-- Right side of Header (Placeholder for navigation/signup link if needed) -->
            <HBox alignment="CENTER_RIGHT" spacing="15.0">
                <!-- You can add navigation links here if your design needs them -->
                <!--
                <Hyperlink text="Download" styleClass="header-link"/>
                <Hyperlink text="Pricing" styleClass="header-link"/>
                <Hyperlink text="Support" styleClass="header-link"/>
                -->
                <!-- The mockup header has a 'Sign in' button, but this is the Sign In page.
                     Maybe this button is for 'Sign Up' or removed entirely for this view.
                     Let's add a placeholder for 'Sign Up' as a link. -->
                <Hyperlink text="Sign Up" styleClass="header-link" onAction="#handleHeaderSignUpLink"/>
            </HBox>
        </HBox>

        <!-- Main Content Area - The Centered Card will be here -->
        <StackPane alignment="CENTER" VBox.vgrow="ALWAYS" styleClass="main-content-login">
            <padding>
                <Insets top="30" right="15" bottom="30" left="15"/> <!-- Add some horizontal padding -->
            </padding>

            <!-- The Login Card -->
            <VBox alignment="TOP_CENTER" spacing="20.0" styleClass="login-card">
                <padding>
                    <Insets top="30" right="30" bottom="30" left="30"/>
                </padding>

                <!-- Sign In / Sign Up Tabs -->
                <VBox spacing="0">
                    <HBox alignment="CENTER" spacing="0">
                        <!-- Sign In Tab -->
                        <!-- Using Label as tab header for simpler FXML, controller will handle click -->
                        <Label text="Sign In" fx:id="signInTabLabel" styleClass="tab-label" onMouseClicked="#handleSignInTabClick" alignment="CENTER" HBox.hgrow="ALWAYS"/>
                        <!-- Sign Up Tab -->
                        <Label text="Sign Up" fx:id="signUpTabLabel" styleClass="tab-label" onMouseClicked="#handleSignUpTabClick" alignment="CENTER" HBox.hgrow="ALWAYS"/>
                    </HBox>
                    <!-- Tab Indicator -->
                    <HBox alignment="CENTER_LEFT" prefHeight="3.0" styleClass="tab-indicator-container">
                        <!-- We will control the position and width of this region via CSS/Controller -->
                        <!-- For simplicity in FXML, let's use two Regions for the indicator -->
                        <Region fx:id="signInIndicator" prefHeight="3.0" styleClass="tab-indicator primary-indicator" HBox.hgrow="ALWAYS"/>
                        <Region fx:id="signUpIndicator" prefHeight="3.0" styleClass="tab-indicator secondary-indicator" HBox.hgrow="ALWAYS"/>
                    </HBox>
                </VBox>


                <!-- Form Container - We'll switch content here -->
                <!-- For simplicity, let's just show the Sign In form initially -->
                <VBox fx:id="signInFormPane" spacing="20.0" styleClass="form-container">
                    <!-- Email Field -->
                    <TextField fx:id="emailField" promptText="Email address" styleClass="form-input"/>
                    <!-- Password Field -->
                    <PasswordField fx:id="passwordField" promptText="Password" styleClass="form-input"/>

                    <!-- Forgot Password Link -->
                    <HBox alignment="CENTER_RIGHT">
                        <Hyperlink text="Forgot Password?" styleClass="forgot-password-link" onAction="#handleForgotPassword"/>
                    </HBox>

                    <!-- Sign In Button -->
                    <Button fx:id="signInButton" text="Sign In" styleClass="btn-primary" onAction="#handleSignIn"/>

                    <!-- Or continue with Separator -->
                    <HBox alignment="CENTER" spacing="10">
                        <Region styleClass="separator-line" HBox.hgrow="ALWAYS"/>
                        <Label text="or continue with" styleClass="separator-text"/>
                        <Region styleClass="separator-line" HBox.hgrow="ALWAYS"/>
                    </HBox>

                    <!-- Social Sign In Buttons -->
                    <VBox spacing="15">
                        <Button fx:id="googleSignInButton" text="Sign in with Google" styleClass="btn-secondary" onAction="#handleGoogleSignIn" >
                            <graphic>
                                <!-- Replace with your Google icon path -->
                                <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                    <image>
                                        <Image url="@../images/google.png"/>
                                    </image>
                                </ImageView>
                            </graphic>
                        </Button>
                        <Button fx:id="microsoftSignInButton" text="Sign in with Microsoft" styleClass="btn-secondary" onAction="#handleMicrosoftSignIn">
                            <graphic>
                                <!-- Replace with your Microsoft icon path -->
                                <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                    <image>
                                        <Image url="@../images/microsoft.png"/>
                                    </image>
                                </ImageView>
                            </graphic>
                        </Button>
                    </VBox>
                </VBox>

                <!-- Placeholder for the Sign Up Form - Initially hidden -->
                <!-- You would structure this similarly to the Sign In form -->
                <VBox fx:id="signUpFormPane" spacing="20.0" styleClass="form-container" visible="false" managed="false">
                    <Label text="Sign Up Form Goes Here" styleClass="separator-text"/>
                    <!-- Add Name, Email, Password, Confirm Password fields, Sign Up button etc. -->
                </VBox>


                <!-- Error Message Area -->
                <HBox fx:id="errorMessageArea" alignment="CENTER_LEFT" spacing="5" styleClass="error-message-area" visible="false" managed="false">
                    <!-- Example icon -->
                    <Label text="⚠️" styleClass="error-icon"/>
                    <Label fx:id="errorMessageLabel" text="Invalid email or password. Please try again." styleClass="error-message-text"/>
                </HBox>

            </VBox>
        </StackPane>

    </VBox>
</StackPane>